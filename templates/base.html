<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chats</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>

  <!-- Responsive Navbar -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a href="{% url 'chats:index' %}" class="navbar-brand text-nowrap bg-success border fs-3 mb-2 px-3 py-1 rounded text-white">Chats</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
        aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarContent">
        <!-- Search Form with embedded URLs -->
<form class="d-flex ms-auto me-3 my-2 my-lg-0">
  <input class="form-control me-2" name="query" type="search" placeholder="Search" aria-label="Search" hx-get="{% url 'chats:search_friends' %}" hx-target="#friend_chat" hx-trigger="keyup changed delay:300ms" hx-swap="innerHTML" />
        <a href="{% url 'chats:logout' %}" class="btn btn-outline-danger">Logout</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container-fluid px-3 px-md-5 mt-4">
    {% block content %}

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
      {% for chat in chats %}
      <div class="col">
        <a href="{% url 'chats:chat_text' pk=chat.friend.id %}" style="text-decoration: none;">
          <div class="card hover-card h-100">
            <div class="card-body">
              <h5 class="card-title">{{ chat.friend.username }}</h5>
            </div>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>

    <style>
      .hover-card {
        transition: all 0.3s ease;
      }
      .hover-card:hover {
        transform: scale(1.03);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        cursor: pointer;
      }
    </style>

    {% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/htmx.org@2.0.2"></script>
</body>
</html>